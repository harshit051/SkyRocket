{"ast":null,"code":"var _jsxFileName = \"/home/unthinkable-lap-0240/Documents/Major Project/webapp/src/App.js\",\n    _s = $RefreshSig$();\n\nimport \"./App.css\";\nimport { react, useEffect, useReducer, useMemo } from \"react\";\nimport { Levels } from \"react-activity\";\nimport { AuthContext } from \"./component/context\";\nimport WelcomePage from \"./page/WelcomePage\";\nimport LoginPage from \"./page/LoginPage\";\nimport RegistrationPage from \"./page/Registrationpage\";\nimport \"react-activity/dist/Levels.css\";\nimport { Route, BrowserRouter as Router, Switch } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  const initialLoginState = {\n    isLoading: true,\n    userToken: null,\n    userName: null\n  };\n\n  const loginReducer = (prevState, action) => {\n    switch (action.type) {\n      case \"RETRIEVE_TOKEN\":\n        return { ...prevState,\n          userToken: action.token,\n          isLoading: true\n        };\n\n      case \"LOGIN\":\n        return { ...prevState,\n          userName: action.id,\n          userToken: action.token,\n          isLoading: false\n        };\n\n      case \"LOGOUT\":\n        return { ...prevState,\n          userName: null,\n          userToken: null,\n          isLoading: false\n        };\n\n      case \"REGISTER\":\n        return { ...prevState,\n          userName: null,\n          userToken: null,\n          isLoading: false\n        };\n\n      default:\n        return { ...prevState\n        };\n    }\n  };\n\n  const [loginState, dispatch] = useReducer(loginReducer, initialLoginState);\n  const authContext = useMemo(() => ({\n    signIn: foundUser => {\n      // setUserToken('fgkj');\n      // setIsLoading(false);\n      const userToken = String(foundUser[4]);\n      const userName = foundUser[1];\n      console.log(\"yes\"); // const userToken = String(foundUser[4]);\n      // const userName = foundUser[3];\n\n      localStorage.setItem(\"userToken\", userToken);\n      localStorage.setItem(\"userName\", userName); // localStorage.setItem('userToken', userToken);\n      // console.log('user token: ', userToken);\n\n      dispatch({\n        type: \"LOGIN\",\n        id: userName,\n        token: userToken\n      });\n    },\n    signOut: () => {\n      localStorage.removeItem(\"userToken\");\n      localStorage.removeItem(\"userName\"); // localStorage.multiRemove(['tasksItems', 'email', 'password', 'data'])\n\n      dispatch({\n        type: \"LOGOUT\"\n      });\n    },\n    signUp: () => {\n      // setUserToken('fgkj');\n      // setIsLoading(false);\n      dispatch({\n        type: \"REGISTER\"\n      });\n    }\n  }), []);\n  useEffect(() => {\n    setTimeout(() => {\n      let userToken;\n      userToken = null;\n      userToken = localStorage.getItem(\"userToken\"); // console.log('user token: ', userToken);\n\n      dispatch({\n        type: \"RETRIEVE_TOKEN\",\n        token: userToken\n      });\n    }, 1000);\n  }, []);\n\n  if (loginState.isLoading) {\n    // setInterval(() => {\n    //   initialLoginState.isLoading=false;\n    // }, 1000);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Levels\",\n      children: /*#__PURE__*/_jsxDEV(Levels, {\n        color: \"blue\",\n        size: 100\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: authContext,\n    children: loginState.userToken === null ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Router, {\n        children: /*#__PURE__*/_jsxDEV(Switch, {\n          children: [/*#__PURE__*/_jsxDEV(Route, {\n            path: \"/\",\n            exact: true,\n            component: LoginPage\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/Registration\",\n            component: RegistrationPage\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: /*#__PURE__*/_jsxDEV(Router, {\n        children: /*#__PURE__*/_jsxDEV(Switch, {\n          children: /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/\",\n            exact: true,\n            children: /*#__PURE__*/_jsxDEV(WelcomePage, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 128,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"YkPKI2gq8yxV1TGQBOL/Bo5tJfs=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/home/unthinkable-lap-0240/Documents/Major Project/webapp/src/App.js"],"names":["react","useEffect","useReducer","useMemo","Levels","AuthContext","WelcomePage","LoginPage","RegistrationPage","Route","BrowserRouter","Router","Switch","App","initialLoginState","isLoading","userToken","userName","loginReducer","prevState","action","type","token","id","loginState","dispatch","authContext","signIn","foundUser","String","console","log","localStorage","setItem","signOut","removeItem","signUp","setTimeout","getItem"],"mappings":"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","sourcesContent":["import \"./App.css\";\nimport { react, useEffect, useReducer, useMemo } from \"react\";\nimport { Levels } from \"react-activity\";\nimport { AuthContext } from \"./component/context\";\nimport WelcomePage from \"./page/WelcomePage\";\nimport LoginPage from \"./page/LoginPage\";\nimport RegistrationPage from \"./page/Registrationpage\";\nimport \"react-activity/dist/Levels.css\";\n\nimport { Route, BrowserRouter as Router ,Switch} from \"react-router-dom\";\n\nfunction App() {\n\n  const initialLoginState = {\n    isLoading: true,\n    userToken: null,\n    userName: null,\n  };\n\n  const loginReducer = (prevState, action) => {\n    switch (action.type) {\n      case \"RETRIEVE_TOKEN\":\n        return {\n          ...prevState,\n          userToken: action.token,\n          isLoading: true,\n        };\n      case \"LOGIN\":\n        return {\n          ...prevState,\n          userName: action.id,\n          userToken: action.token,\n          isLoading: false,\n        };\n      case \"LOGOUT\":\n        return {\n          ...prevState,\n          userName: null,\n          userToken: null,\n          isLoading: false,\n        };\n      case \"REGISTER\":\n        return {\n          ...prevState,\n          userName: null,\n          userToken: null,\n          isLoading: false,\n        };\n      default:\n        return {\n          ...prevState,\n        };\n    }\n  };\n\n  const [loginState, dispatch] = useReducer(loginReducer, initialLoginState);\n\n  const authContext = useMemo(\n    () => ({\n      signIn: (foundUser) => {\n        // setUserToken('fgkj');\n        // setIsLoading(false);\n        const userToken = String(foundUser[4]);\n        const userName = foundUser[1];\n\n        console.log(\"yes\");\n        // const userToken = String(foundUser[4]);\n\n        // const userName = foundUser[3];\n\n        localStorage.setItem(\"userToken\", userToken);\n        localStorage.setItem(\"userName\", userName);\n        // localStorage.setItem('userToken', userToken);\n\n        // console.log('user token: ', userToken);\n        dispatch({\n          type: \"LOGIN\",\n          id: userName,\n          token: userToken,\n        });\n      },\n      signOut: () => {\n        localStorage.removeItem(\"userToken\");\n        localStorage.removeItem(\"userName\");\n        // localStorage.multiRemove(['tasksItems', 'email', 'password', 'data'])\n\n        dispatch({\n          type: \"LOGOUT\",\n        });\n      },\n      signUp: () => {\n        // setUserToken('fgkj');\n        // setIsLoading(false);\n\n        dispatch({\n          type: \"REGISTER\",\n        });\n      },\n    }),\n    []\n  );\n\n  useEffect(() => {\n    setTimeout(() => {\n      let userToken;\n      userToken = null;\n      userToken = localStorage.getItem(\"userToken\");\n\n      // console.log('user token: ', userToken);\n      dispatch({ type: \"RETRIEVE_TOKEN\", token: userToken });\n    }, 1000);\n  }, []);\n\n  if (loginState.isLoading) {\n    // setInterval(() => {\n    //   initialLoginState.isLoading=false;\n    // }, 1000);\n    return (\n      <div className=\"Levels\">\n\n        <Levels color=\"blue\" size={100}/>\n    \n      </div>\n    );\n  }\n\n  return (\n    <AuthContext.Provider value={authContext}>\n      {loginState.userToken === null ? (\n        <div>\n          <Router>\n            <Switch>\n              <Route path=\"/\" exact={true} component={LoginPage} />\n              <Route path=\"/Registration\" component={RegistrationPage} />\n            </Switch>\n          </Router>\n        </div>\n      ) : (\n        <div className=\"App\">\n          <Router>\n            <Switch>\n              <Route path=\"/\" exact={true}>\n                <WelcomePage />\n              </Route>\n            </Switch>\n          </Router>\n        </div>\n      )}\n    </AuthContext.Provider>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}